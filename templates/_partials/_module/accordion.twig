{% if module.type.handle == 'accordion' %}

    <div class="md:max-w-3xl mx-auto relative">
        {% for block in module.accordionMatrix.all() %}

            <div class="topLevel accordion">
                <button id="accordionParent{{ loop.index }}" aria-controls="accordionPanel{{ loop.index }}" aria-expanded="false" class="accordionTrigger flex w-full focus:outline-none">
                    <img class="mr-4" src="/assets/img/closed.svg" alt="Accordion icon">
                    <h4 class="mb-0 font-bold">
                        {{ block.accordionHeading }}
                    </h4>
                </button>
                <div class="panel my-8 richText" id="accordionPanel1" aria-labelledby="accordionParent{{ loop.index }}" style="display: none;">
                    {{ block.accordionContent }}

                    {% for nested in block.nestedAccordion %}
                        <div class="nestedLevel accordion">
                            <button class="accordionTrigger flex w-full focus:outline-none">
                                <img class="mr-4" src="/assets/img/closed.svg" alt="Accordion icon">
                                <h5 class="mb-0 font-bold">{{ nested.nestedAccordionHeading }}</h5>
                            </button>
                            <div class="panel richText my-8" style="display: none;">
                                {{ nested.nestedAccordionContent }}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>

        {% endfor %}
    </div>

{% endif %}