!function(){"use strict";var e="0.3.2",o=function e(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,o){for(var t=0;t<o.length;t++){var i=o[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(o,t,i){return t&&e(o.prototype,t),i&&e(o,i),o}}(),i=function e(o){if(Array.isArray(o)){for(var t=0,i=Array(o.length);t<o.length;t++)i[t]=o[t];return i}return Array.from(o)},n,a,r,s,l,c,d,u;(a=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],r=function(){function e(t){var n=t.targetModal,a=t.triggers,r=void 0===a?[]:a,s=t.onShow,l=void 0===s?function(){}:s,c=t.onClose,d=void 0===c?function(){}:c,u=t.openTrigger,h=void 0===u?"data-micromodal-trigger":u,f=t.closeTrigger,v=void 0===f?"data-micromodal-close":f,g=t.disableScroll,m=void 0!==g&&g,b=t.disableFocus,y=void 0!==b&&b,w=t.awaitCloseAnimation,k=void 0!==w&&w,E=t.debugMode,p=void 0!==E&&E;o(this,e),this.modal=document.getElementById(n),this.config={debugMode:p,disableScroll:m,openTrigger:h,closeTrigger:v,onShow:l,onClose:d,awaitCloseAnimation:k,disableFocus:y},r.length>0&&this.registerTriggers.apply(this,i(r)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}return t(e,[{key:"registerTriggers",value:function e(){for(var o=this,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];i.filter(Boolean).forEach(function(e){e.addEventListener("click",function(){return o.showModal()})})}},{key:"showModal",value:function e(){this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add("is-open"),this.setFocusToFirstNode(),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.onShow(this.modal)}},{key:"closeModal",value:function e(){var o=this.modal;this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus(),this.config.onClose(this.modal),this.config.awaitCloseAnimation?this.modal.addEventListener("animationend",function e(){o.classList.remove("is-open"),o.removeEventListener("animationend",e,!1)},!1):o.classList.remove("is-open")}},{key:"closeModalById",value:function e(o){this.modal=document.getElementById(o),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function e(o){if(this.config.disableScroll){var t=document.querySelector("body");switch(o){case"enable":Object.assign(t.style,{overflow:"",height:""});break;case"disable":Object.assign(t.style,{overflow:"hidden",height:"100vh"})}}}},{key:"addEventListeners",value:function e(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function e(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function e(o){o.target.hasAttribute(this.config.closeTrigger)&&(this.closeModal(),o.preventDefault())}},{key:"onKeydown",value:function e(o){27===o.keyCode&&this.closeModal(o),9===o.keyCode&&this.maintainFocus(o)}},{key:"getFocusableNodes",value:function e(){var o=this.modal.querySelectorAll(a);return Array.apply(void 0,i(o))}},{key:"setFocusToFirstNode",value:function e(){if(!this.config.disableFocus){var o=this.getFocusableNodes();o.length&&o[0].focus()}}},{key:"maintainFocus",value:function e(o){var t=this.getFocusableNodes();if(this.modal.contains(document.activeElement)){var i=t.indexOf(document.activeElement);o.shiftKey&&0===i&&(t[t.length-1].focus(),o.preventDefault()),o.shiftKey||i!==t.length-1||(t[0].focus(),o.preventDefault())}else t[0].focus()}}]),e}(),s=null,l=function e(o,t){var i=[];return o.forEach(function(e){var o=e.attributes[t].value;void 0===i[o]&&(i[o]=[]),i[o].push(e)}),i},c=function e(o){if(!document.getElementById(o))return console.warn("MicroModal v0.3.2: ❗Seems like you have missed %c'"+o+"'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'+o+'"></div>'),!1},d=function e(o){if(o.length<=0)return console.warn("MicroModal v0.3.2: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'),!1},u=function e(o,t){if(d(o),!t)return!0;for(var i in t)c(i);return!0},{init:function e(o){var t=Object.assign({},{openTrigger:"data-micromodal-trigger"},o),n=[].concat(i(document.querySelectorAll("["+t.openTrigger+"]"))),a=l(n,t.openTrigger);if(!0!==t.debugMode||!1!==u(n,a))for(var s in a){var c=a[s];t.targetModal=s,t.triggers=[].concat(i(c)),new r(t)}},show:function e(o,t){var i=t||{};i.targetModal=o,!0===i.debugMode&&!1===c(o)||(s=new r(i)).showModal()},close:function e(o){o?s.closeModalById(o):s.closeModal()}}).init()}();